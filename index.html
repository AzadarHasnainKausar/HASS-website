<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hasnain Academic Services School</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        h1, h2, h3 {
            text-align: center;
        }
        .button-container {
            text-align: center;
            margin-bottom: 20px;
        }
        .button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            margin: 5px;
            border-radius: 5px;
        }
        .form-container, .data-container {
            background-color: white;
            border: 1px solid #ccc;
            padding: 20px;
            margin: 20px auto;
            width: 90%;
            max-width: 600px;
            border-radius: 5px;
            display: none;
        }
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        .data-table th, .data-table td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: left;
        }
        .data-table th {
            background-color: #f2f2f2;
        }
        .amount-summary {
            margin: 20px auto;
            width: 90%;
            max-width: 600px;
        }
    </style>
</head>
<body>
    <h1>Hasnain Academic Services School</h1>
    <div class="button-container">
        <button class="button" onclick="showForm('admission')">Admission Panel</button>
        <button class="button" onclick="showForm('fee-submission')">Fee Submission</button>
        <button class="button" onclick="showForm('fee-checking')">Fee Checking</button>
    </div>

    <!-- Admission Form -->
    <div id="admission-form" class="form-container">
        <h2>Admission Form</h2>
        <input type="text" id="registration-number" placeholder="Registration Number" required>
        <input type="text" id="student-name" placeholder="Student Name" required>
        <input type="date" id="date-of-birth" placeholder="Date of Birth" required>
        <input type="text" id="student-cnic" placeholder="Student CNIC" required>
        <input type="text" id="fathers-name" placeholder="Father's Name" required>
        <input type="text" id="fathers-cnic" placeholder="Father's CNIC" required>
        <input type="text" id="cast" placeholder="Cast" required>
        <input type="text" id="fathers-occupation" placeholder="Father's Occupation" required>
        <select id="admitted-class" required>
            <option value="">Admitted in Class</option>
            <option value="PLAY">PLAY</option>
            <option value="NURSERY">NURSERY</option>
            <option value="PREP">PREP</option>
            <option value="ONE">ONE</option>
            <option value="TWO">TWO</option>
            <option value="THREE">THREE</option>
            <option value="4TH">4TH</option>
            <option value="5TH">5TH</option>
            <option value="6TH">6TH</option>
            <option value="7TH">7TH</option>
            <option value="8TH">8TH</option>
            <option value="PRE 9TH">PRE 9TH</option>
            <option value="9TH">9TH</option>
            <option value="10TH">10TH</option>
        </select>
        <input type="text" id="address" placeholder="Address" required>
        <button class="button" onclick="submitAdmission()">Submit Admission</button>
    </div>

    <!-- Fee Submission Form -->
    <div id="fee-submission-form" class="form-container">
        <h2>Fee Submission</h2>
        <input type="text" id="fee-student-name" placeholder="Student Name" required>
        <input type="text" id="fee-fathers-name" placeholder="Father's Name" required>
        <select id="fee-class" required>
            <option value="">Select Grade</option>
            <option value="PLAY">PLAY</option>
            <option value="NURSERY">NURSERY</option>
            <option value="PREP">PREP</option>
            <option value="ONE">ONE</option>
            <option value="TWO">TWO</option>
            <option value="THREE">THREE</option>
            <option value="4TH">4TH</option>
            <option value="5TH">5TH</option>
            <option value="6TH">6TH</option>
            <option value="7TH">7TH</option>
            <option value="8TH">8TH</option>
            <option value="PRE 9TH">PRE 9TH</option>
            <option value="9TH">9TH</option>
            <option value="10TH">10TH</option>
        </select>
        <input type="number" id="fee-amount" placeholder="Fee Amount" required>
        <button class="button" onclick="submitFee()">Submit Fee</button>
    </div>

    <!-- Fee Checking Form -->
    <div id="fee-checking-form" class="form-container">
        <h2>Fee Checking</h2>
        <input type="text" id="check-frn" placeholder="Enter FRN" required>
        <button class="button" onclick="checkFee()">Check Fee</button>
        <p id="fee-check-result"></p>
    </div>

    <!-- Total Collected Fees -->
    <div id="collected-fee-amount" class="amount-summary">
        <h3>Total Collected Fees</h3>
        <p id="total-fees"></p>
    </div>

    <script>
        function showForm(form) {
            document.getElementById('admission-form').style.display = form === 'admission' ? 'block' : 'none';
            document.getElementById('fee-submission-form').style.display = form === 'fee-submission' ? 'block' : 'none';
            document.getElementById('fee-checking-form').style.display = form === 'fee-checking' ? 'block' : 'none';
            loadCollectedFees();
        }

        function submitAdmission() {
            const registrationNumber = document.getElementById('registration-number').value;
            const studentName = document.getElementById('student-name').value;
            const dateOfBirth = document.getElementById('date-of-birth').value;
            const studentCnic = document.getElementById('student-cnic').value;
            const fathersName = document.getElementById('fathers-name').value;
            const fathersCnic = document.getElementById('fathers-cnic').value;
            const cast = document.getElementById('cast').value;
            const fathersOccupation = document.getElementById('fathers-occupation').value;
            const admittedClass = document.getElementById('admitted-class').value;
            const address = document.getElementById('address').value;

            const admissions = JSON.parse(localStorage.getItem('admissions')) || {};
            if (!admissions[admittedClass]) {
                admissions[admittedClass] = [];
            }
            admissions[admittedClass].push({ registrationNumber, studentName, dateOfBirth, studentCnic, fathersName, fathersCnic, cast, fathersOccupation, address });
            localStorage.setItem('admissions', JSON.stringify(admissions));

            alert('Student admitted successfully!');
            document.getElementById('admission-form').reset();
        }

        function submitFee() {
            const studentName = document.getElementById('fee-student-name').value;
            const fathersName = document.getElementById('fee-fathers-name').value;
            const feeClass = document.getElementById('fee-class').value;
            const feeAmount = document.getElementById('fee-amount').value;

            const frn = Date.now(); // Using timestamp as FRN
            const fees = JSON.parse(localStorage.getItem(feeClass + '-fees')) || [];
            fees.push({ frn, studentName, fathersName, feeAmount });
            localStorage.setItem(feeClass + '-fees', JSON.stringify(fees));

            // Update total collected fees
            const totalCollectedFees = parseInt(localStorage.getItem('collected-fees')) || 0;
            localStorage.setItem('collected-fees', totalCollectedFees + parseInt(feeAmount));

            alert('Fee submitted successfully! Your FRN is: ' + frn);
            document.getElementById('fee-submission-form').reset();
            loadCollectedFees();
        }

        function checkFee() {
            const frn = document.getElementById('check-frn').value;
            const fees = JSON.parse(localStorage.getItem('admissions')) || {};

            let found = false;
            for (const classKey in fees) {
                const classFees = JSON.parse(localStorage.getItem(classKey + '-fees')) || [];
                for (const fee of classFees) {
                    if (fee.frn == frn) {
                        document.getElementById('fee-check-result').innerText = `Fee for ${fee.studentName} (Father: ${fee.fathersName}) is ${fee.feeAmount}`;
                        found = true;
                        break;
                    }
                }
                if (found) break;
            }

            if (!found) {
                document.getElementById('fee-check-result').innerText = 'No fee record found for the provided FRN.';
            }
        }

        function loadCollectedFees() {
            const totalFees = localStorage.getItem('collected-fees') || 0;
            document.getElementById('total-fees').innerText = totalFees + ' PKR';
        }
    </script>
</body>
</html>
